# Maintainer: Vlad Panazan <brgdvz@gmail.com>

pkgname=tlstunnel-git
_pkgname=tlstunnel
pkgver=r49.09d2867
pkgrel=1
pkgdesc='A TLS reverse proxy'
url='https://git.sr.ht/~emersion/tlstunnel'
license=('MIT')
arch=('x86_64')
depends=()
makedepends=('make' 'go' 'git' 'scdoc')
source=("git+https://git.sr.ht/~emersion/tlstunnel")
sha256sums=('SKIP')
provides=("tlstunnel")
conflicts=("tlstunnel")

pkgver() {
	cd "$_pkgname"
	printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

build(){
	cd "$_pkgname"
	make PREFIX=/usr
}

package() {
	cd "$_pkgname"
	make PREFIX=/usr DESTDIR="${pkgdir}/" install
}

